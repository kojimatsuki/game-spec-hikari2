# 🎮 ゲーム企画書「ひかりちゃん大冒険 〜イタリアンブレインロットからの脱出〜」

## 📝 ストーリー原案（赤ちゃんの音声入力から）

> 3回したらのゲームを1個作ってください。
>
> 【ストーリー1】うんこうんこうんこ。次はトイレを食べるゲームです。Robloxに進化してトイレを食べていきます。そしてイタリアンブレインロットの人がやってきてあなたを食べてしまうかもしれません。食べられてそのお腹の中にはコインがたくさんあります。コインをたくさん集めて包丁も取っていきましょう。そして6個の包丁集めたら切っていきます。切っていくボタンは聞いてください。そしてバイクで逃げてください。それでイタリアンブレインロットは進化します。そしてイタリアンブレインロットは進化したのに死んでしまいました。これでクリアです。次このゲームはとても3次元です。2次元じゃないです。3次元ゲームです。なのでリアルな3次元で作ってください。
>
> 【ストーリー2】最後のゲームではありませんが、ちょっと最後っぽいゲーム。友達を集めるゲームです。学校へ行ってランドセルも忘れずに家に帰ります。それでまた学校へ行きます。夜にそこのお化けたちを全員倒してください。それは一発なんで大丈夫です。攻撃はないので大丈夫です。ただ逃げてください。次は空飛びながらうんちを漏らすゲームです。それでクリアします。
>
> 【ストーリー3】最後のゲームです。このゲームは人形食べてしまうゲームです。その人形を食べてしまって光を集めます。そしてひかりちゃんは魔法使いになりました。なんでもなれる猫でもなんでも動物になれる魔法使いです。そして光ちゃんのお母さんは猫が欲しいと言っていました。で、ひかりちゃんは猫に変身してやってあげましたが、それにはコインを食べないとダメです。コインを貯めてください。隠し面がとても難しいゲームです。まず画面全体にお化けが出てきます。そのお化けを連打して倒すと、お化けはどんどん小さくなったり大きくなったりして、最後に大きくなって爆発して全面全クリになるようなストーリーがいいです。そして最後のページです。ひかりちゃんはテレビの中に吸い込まれてしまいました。そしてニュースに出るようになりました。ひかりちゃんはそのニュースから脱出できるのか。

---

## ✨ ストーリー整理

3つのストーリーが1つの大冒険としてつながる。
ひかりちゃんが色々な世界を旅して、最後にテレビの中に吸い込まれる壮大な物語。

### ワールド1：イタリアンブレインロットの世界（3D風）
うんこを3回やったら始まる。トイレを食べるRoblox風の世界。
**イタリアンブレインロット**という謎のモンスターに食べられるが、
お腹の中でコインと包丁6本を集めて脱出！バイクで逃げる！
イタリアンブレインロットは進化するが…死んでしまう。クリア！

### ワールド2：学校と夜のお化け
学校に行って友達を集める日常パート。ランドセルを忘れずに！
でも夜になるとお化けが出現。攻撃はないからひたすら逃げる！
最後は空を飛びながらうんちを漏らしてクリア。

### ワールド3：魔法使いひかりちゃん
人形を食べて光を集めると、ひかりちゃんが**魔法使い**に変身！
猫でもなんでも動物に変身できる。
お母さんが猫が欲しいと言うので猫に変身してあげる（コイン必要）。
隠しステージはお化け連打→爆発で全クリ！
そして最後…ひかりちゃんはテレビに吸い込まれニュースに出る。脱出できるのか？

---

## 🎯 Claude Codeへの指示

上記のストーリーをもとに、以下の仕様でブラウザゲームを作ってください。

### ゲーム基本設定

- **タイトル**: 「ひかりちゃん大冒険 〜イタリアンブレインロットからの脱出〜」
- **ゲーム形式**: ブラウザで遊べるHTML+CSS+JavaScript（ファイル分割構成）
- **ジャンル**: ミニゲーム集＋アドベンチャー（3ワールド構成）
- **対象年齢**: 子供向け（小学生）
- **操作方法**: クリック／タップ（スマホ・タブレット対応）
- **プレイ時間目安**: 25〜40分（全ワールド通し）
- **雰囲気**: カオス＋シュール＋かわいい。テンション最大

### 技術要件

- 外部ライブラリ不要（Canvas APIまたはDOM操作で実装）
- レスポンシブ対応（PC・タブレット両方で遊べる）
- 日本語テキスト
- 絵文字ベースのビジュアル
- **ワールド1は3D風の演出**（CSS 3D transform + パース表現で疑似3D。Three.jsは使わない）
  - 奥行きのあるパース背景
  - キャラクターの拡大縮小で遠近感
  - 床のグリッド模様で3D空間を表現

### ファイル構成（適度に分割すること）

```
game/
├── index.html              # エントリーポイント（HTMLのみ）
├── css/
│   └── style.css           # 全体のスタイル・アニメーション・3D風CSS
├── js/
│   ├── main.js             # ゲーム初期化・ワールド管理
│   ├── scenes.js           # シーン遷移（タイトル/ワールド選択/エンディング）
│   ├── w1-poop.js          # W1ステージ1: うんこ3回
│   ├── w1-toilet.js        # W1ステージ2: トイレ食べ（3D風）
│   ├── w1-belly.js         # W1ステージ3: お腹の中（コイン＆包丁集め）
│   ├── w1-escape.js        # W1ステージ4: バイク脱出＆ブレインロット戦
│   ├── w2-school.js        # W2ステージ1: 学校＆友達集め
│   ├── w2-ghost.js         # W2ステージ2: 夜のお化けから逃げる
│   ├── w2-flying.js        # W2ステージ3: 空飛びうんちフライト
│   ├── w3-dolls.js         # W3ステージ1: 人形食べ＆光集め
│   ├── w3-magic.js         # W3ステージ2: 魔法使い変身＆猫変身
│   ├── w3-tv.js            # W3ステージ3: テレビ脱出（最終ステージ）
│   ├── secret-boss.js      # 隠しステージ: お化け連打→爆発
│   ├── hikari.js           # ひかりちゃんキャラクター管理・変身
│   ├── economy.js          # コインシステム
│   ├── ui.js               # 共通UI（スコア/コイン/メッセージ）
│   ├── audio.js            # Web Audio API サウンド管理
│   └── data.js             # 全ステージの設定データ・セリフ
└── README.md               # 遊び方の説明
```

#### 分割の方針
- **1ファイル300行以下**を目安に分割する
- **各ステージを独立したファイル**にする
- ワールドごとにプレフィックス（w1-, w2-, w3-）で整理
- `data.js` にデータを集約し、ロジックと分離する
- JSファイルはES Modules（import/export）で連携する
- `index.html` は `<script type="module" src="js/main.js">` で読み込む

---

## 🗺️ ゲーム全体構成

### タイトル画面

- ひかりちゃん👧✨がいろんな姿に変身するアニメーション
  （バイク🏍️→魔法使い🧙‍♀️→猫🐱→ニュースキャスター📺）
- イタリアンブレインロット👾が背景にチラッと見える
- 「ひかりちゃん大冒険」タイトルがドーンと表示
- 💩が飛んでくる
- 「はじめる」ボタン

### ワールド選択画面

- 3つのワールドが順番に解放される
- ワールド1🚽 → ワールド2🏫 → ワールド3🧙‍♀️
- 全クリ後に🔒隠しステージ解放

---

## 🚽 ワールド1：イタリアンブレインロットの世界

**※このワールドは3D風の演出で作る（CSS 3D transform使用）**

### W1-1：うんこ3回

- 画面に「うんこ」ボタン💩が表示
- 3回タップすると…
- 画面が「Roblox風」に変化！（ブロック風のデザイン＋3D風パース）
- 「ゲームが進化した！」テキスト
- 実質チュートリアル的なステージ

### W1-2：トイレ食べ（3D風フィールド）

- **3D風の表現**:
  - CSS perspective + transform で奥行きのあるフィールド
  - 床がグリッド模様で遠近感
  - キャラクターが奥に行くと小さく、手前に来ると大きくなる
- ひかりちゃんがRoblox風のブロックキャラに変身
- フィールドにトイレ🚽が散らばっている
- トイレに近づいてタップ → 食べる！「モグモグ🚽」
- 食べるとパワーアップ（スピード/サイズが上がる）
- 10個食べると…
- **「イタリアンブレインロット登場！」**

#### イタリアンブレインロットとは
- 👾 巨大な紫色のモンスター（ブロック風の3Dデザイン）
- 脳🧠みたいな頭＋イタリア国旗🇮🇹カラーの体
- 「ブレインロォォォット！」と叫びながら迫ってくる
- ひかりちゃんを丸飲みにする！「ぱくっ！😱」

### W1-3：お腹の中（コイン＆包丁集め）

- イタリアンブレインロットのお腹の中🫃
- 3D風の体内空間（ピンク＋紫の壁、泡がぶくぶく）
- **コイン💰がたくさん浮いている** → タップで集める
- **包丁🔪が6本隠されている** → 探して集める
  - 包丁は体内のあちこちに配置（壁の裏、泡の中、奥の方）
  - 包丁を見つけるたびにカウンター表示「🔪 2/6」
- 消化液が迫ってくるタイムリミット演出（下から酸が上がってくる）
- **6本揃うと「切るボタン」が出現！**

#### 切るアクション
- 「切るボタン」が画面中央に表示
- ボタンを連打！→ ひかりちゃんが包丁で切りまくる🔪🔪🔪
- お腹に穴が開く！「ビリビリビリ！」
- 脱出成功！→ バイクが落ちている

### W1-4：バイク脱出＆ブレインロット進化

- バイク🏍️に乗って逃げる！（横スクロール）
- 後ろからイタリアンブレインロットが追いかけてくる
- **ブレインロットが進化！**
  - 第1形態👾 → 第2形態👿（翼が生える。速くなる）
  - 第2形態👿 → 第3形態🧠💀（巨大化。画面いっぱい）
- 障害物を避けながら逃げる
- 一定距離逃げると…
- ブレインロット「ブ…ブレイン…ロッ…ト…💀」→ 進化しすぎて死ぬ！
- 爆発💥！！
- **「ワールド1 クリア！」**

---

## 🏫 ワールド2：学校と夜のお化け

### W2-1：学校＆友達集め

- **朝パート**:
  - ひかりちゃんの家🏠が画面に表示
  - 「ランドセル🎒を忘れずに！」→ ランドセルをタップして装備
  - ランドセルを忘れて家を出ると「あ！ランドセル忘れた！」→ 家に戻る
- **学校パート**:
  - 学校🏫に到着
  - 校内を歩き回って友達を見つける
  - 友達キャラ（👦👧👩‍🦰🧒👱）に話しかけてタップ →「なかまになった！」
  - 5人集めるとイベント発生
- **帰宅パート**:
  - 家に帰る → また学校へ行く（繰り返しで友達がさらに増える）
  - 2往復で全員集めたら次のステージへ

### W2-2：夜のお化けから逃げろ！

- 夜になると学校が真っ暗に🌙
- お化け👻💀🎃が大量に出現！
- **ルール**:
  - 攻撃はない。ただ逃げる！
  - 画面をスワイプ/クリックでひかりちゃんを動かす
  - お化けに触れたらアウト → やり直し
  - でも一発で倒せる（お化けに近づいてタップ）
  - 「一発なんで大丈夫！」テキスト表示
- お化けを全員倒すか、出口🚪に到達でクリア
- 友達が応援してくれる「がんばれー！」

### W2-3：空飛びうんちフライト

- ひかりちゃんが空を飛ぶ！🕊️
- 横スクロールフライトゲーム
- タップで上昇、離すと下降（Flappy Bird風）
- **うんちを漏らしながら飛ぶ**💩
  - 自動で定期的に💩が落ちる
  - 💩が地面の敵に当たるとボーナスポイント
  - 💩の軌道が面白い演出
- 障害物（雲☁️、鳥🐦、飛行機✈️）を避ける
- ゴールに到達 →「うんちフライト完了！💩✈️」
- **「ワールド2 クリア！」**

---

## 🧙‍♀️ ワールド3：魔法使いひかりちゃん

### W3-1：人形食べ＆光集め

- フィールドに人形🧸🪆🎎がたくさん落ちている
- 人形に近づいてタップ →「パクッ！」食べる
- 食べると✨光の玉が出現 → 集める
- 光を10個集めるごとに画面が少しずつ明るくなる
- **光を50個集めると…**
- 「ひかりちゃんが魔法使いに覚醒！🧙‍♀️✨」
- 変身演出（キラキラ＋衣装チェンジ＋杖が出現🪄）

### W3-2：魔法使い＆変身ゲーム

- 魔法使いになったひかりちゃんは**なんにでも変身できる！**
- 変身ボタンで動物に変身:
  - 🐱 猫 → すばやく動ける
  - 🐕 犬 → 強い
  - 🐦 鳥 → 飛べる
  - 🐟 魚 → 水中を泳げる
  - 🐑 羊 → メェ〜と鳴ける
  - 🦁 ライオン → 最強
- **お母さんイベント**:
  - お母さん👩「猫が欲しいな〜」
  - 猫に変身するにはコイン💰が必要！
  - コインを集める（画面にばらまかれたコインをタップ）
  - コインを「食べる」（口に入れる演出）
  - 十分集めたら🐱に変身！
  - お母さん「かわいい〜！ありがとう😊」
  - 実はひかりちゃんだとバレない（笑）

### W3-3：テレビ脱出（最終ステージ）

- 突然テレビ📺が現れる！
- ひかりちゃんが吸い込まれる！「きゃー！また！？🌀」
- **テレビの中＝ニュース番組のスタジオ**
- ひかりちゃんがニュースキャスターの席に座っている
- 「速報です！ひかりちゃんがテレビの中に閉じ込められました！」
- **脱出ゲーム**:
  - スタジオ内を探索
  - テレビカメラ📹、原稿📄、モニター🖥️を調べる
  - 手がかりを集めてパスワードを解く
  - パスワードを入力 → テレビが割れる！💥
  - ひかりちゃんが飛び出す！
- **脱出できるかは…プレイヤー次第！**
  - 脱出成功 →「ひかりちゃんは無事帰ってきました！」
  - 脱出失敗（タイムオーバー）→「ひかりちゃんは今もニュースに出ています…📺」
  - どちらもエンディングとして成立

---

## 👻 隠しステージ：お化け連打バトル 〜爆発全クリ〜

**全ワールドクリア後に解放。とても難しい！**

### ルール

1. **画面全体にお化け👻が大量出現**（50体以上）
2. お化けを**連打して倒す**！
3. 倒すたびにお化けのサイズが変化:
   - 小さくなる → 大きくなる → 小さくなる（ランダム）
   - 小さいお化けはタップしにくい！
   - 大きいお化けは画面を覆って邪魔！
4. 全部倒すと…**最後の1体が超巨大化！**
5. 巨大お化け👻を連打連打連打！
6. HPが0になると…
7. 💥💥💥 **大・爆・発** 💥💥💥
8. 画面が光に包まれる
9. **「全面全クリ！！！🏆✨」**

### 演出

- お化けのサイズがリアルタイムで変わり続ける（プルプル震える）
- 連打数がカウンター表示（999コンボ！とか）
- 最後の巨大お化けは画面いっぱい。目がギョロギョロ動く
- 爆発演出は画面全体がフラッシュ → パーティクルが飛び散る
- 「伝説のプレイヤー」の称号

---

## 🎬 エンディング

### 通常エンディング（テレビ脱出成功）
- ひかりちゃんが自分の部屋に戻る
- 今までの冒険を振り返るダイジェスト
- 「イタリアンブレインロット、友達、魔法…すごい冒険だったね」
- 「でもまた吸い込まれそう…📺」
- スタッフロール

### 隠しクリアエンディング
- 全面全クリ後の特別演出
- ひかりちゃんがゲームの世界と現実を自由に行き来できるようになる
- 「ひかりちゃんは伝説のプレイヤーになりました✨」
- 全キャラクター集合シーン（イタリアンブレインロットも友達として登場）

---

## 🎨 ビジュアル・演出

- **スタイル**: ワールドごとに全く違うビジュアル
- **ワールド1（3D風）**:
  - CSS perspective + transform3d でパース表現
  - 床にグリッド模様（奥に行くほど小さくなる遠近法）
  - キャラクターは奥行きに応じてscale変化
  - Roblox風のブロックっぽいデザイン（角ばった絵文字表現）
  - イタリアンブレインロット: 🧠🇮🇹👾のハイブリッド。紫ベース
- **ワールド2（2D日常→ホラー）**:
  - 昼: 明るい学校。パステルカラー
  - 夜: 真っ暗。お化けの目だけ光る👀
  - フライト: 青空＋雲。💩が落ちていく
- **ワールド3（ファンタジー＋テレビ）**:
  - 魔法: キラキラ＋紫＋金色
  - テレビ内: ニューススタジオ風（灰色＋青＋赤いランプ）
  - 変身: 動物ごとに画面のエフェクトが変わる
- **隠しステージ**:
  - 真っ黒背景にお化けだけ。連打でどんどん画面が光る
  - 最後の爆発は画面全体が白く光って虹色パーティクル

- **ひかりちゃんの衣装変化**:
  - 通常: 👧✨（かわいい普段着）
  - W1: 🧱👧（Roblox風ブロックキャラ）
  - W2昼: 👧🎒（ランドセル姿）
  - W2夜: 👧😨（怖がり顔）
  - W2フライト: 👧🕊️💩
  - W3魔法: 🧙‍♀️✨🪄
  - W3猫: 🐱✨
  - W3テレビ: 👧📺🎤（ニュースキャスター風）

## 🔊 サウンド

- Web Audio APIで簡易サウンド:
  - W1: ブロック風の電子音BGM + 「ブレインロォォット！」SE
  - W2昼: 明るい学校チャイム♪ / W2夜: ホラーBGM
  - W2フライト: 風切り音 +「ブリッ！」💩効果音
  - W3魔法: ファンタジーBGM + 変身キラキラ音
  - W3テレビ: ニュースBGM風ジングル
  - 隠し: 無音→連打でどんどん音が重なる→爆発音ドカーン！
  - 共通: コイン取得チャリン、クリアファンファーレ

## 📊 ゲームシステム

- **3ワールド構成**: 順番にプレイ（W1→W2→W3）
- **コインシステム**: ワールド共通。集めたコインは全ステージで使える
- **変身システム**: W3で解放。コインで動物に変身
- **3D風表現**: W1のみCSS 3Dで疑似立体空間
- **難易度**: 基本は子供が楽しめるバランス。隠しステージだけ難しい
- **リトライ**: 各ステージ何度でもやり直し可能

## 📱 必須UI要素

- タイトル画面（変身アニメーション＋「はじめる」ボタン）
- ワールド選択画面（W1🚽 / W2🏫 / W3🧙‍♀️ / 🔒隠し）
- 各ステージ画面（ステージ固有のUI）
- コイン表示（全画面共通、右上に💰表示）
- 包丁カウンター（W1-3: 🔪 0/6）
- 友達カウンター（W2-1: 👫 0/5）
- 変身メニュー（W3: 動物一覧＋必要コイン）
- ステージクリア演出
- ワールドクリア演出（特別な演出＋次ワールド解放）
- エンディング画面（通常＆隠しクリア）

---

## 🚀 Claude Codeでの実行方法

### 方法1: --dangerously-skip-permissions で全自動（おすすめ）

```bash
claude --dangerously-skip-permissions "このゲーム企画書の仕様に沿って、ファイル構成どおりに分割してブラウザゲームを作ってください。3ワールド構成のミニゲーム集で、ワールド1は3D風のCSS表現を使ってください。途中で確認せず最後まで一気に完成させてください。" -f game-spec-hikari2.md
```

### 方法2: allowedTools で必要な権限だけ許可

```bash
claude --allowedTools "Edit,Write,Bash(cat*),Bash(open*),Bash(mkdir*)" "このゲーム企画書の仕様に沿って、ファイル構成どおりに分割してブラウザゲームを作ってください。途中で確認せず最後まで一気に完成させてください。" -f game-spec-hikari2.md
```

### 💡 プロンプトのコツ

- **「途中で確認せず最後まで一気に完成させて」**
- **「質問せずに自分で判断して進めて」**
- **「完成したらブラウザで開いて」**
